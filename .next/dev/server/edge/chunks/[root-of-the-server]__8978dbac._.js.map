{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/server';\n\n/**\n * Routes that require authentication\n */\nconst PROTECTED_PATHS = [\n    '/dashboard',\n    '/prayer-management',\n    '/events',\n    '/campaigns',\n    '/settings',\n    '/profile',\n];\n\n/**\n * Routes that are only accessible when NOT authenticated\n */\nconst AUTH_PATHS = ['/login'];\n\n/**\n * Middleware for route protection\n *\n * Uses the presence of the refresh token cookie (set by the backend)\n * as a heuristic for whether the user has a valid session.\n * The actual token validation happens server-side when the frontend\n * calls the refresh endpoint.\n */\nexport function middleware(request: NextRequest) {\n    const { pathname } = request.nextUrl;\n    const hasRefreshToken = request.cookies.has('refreshToken');\n\n    // Check if the path matches a protected route\n    const isProtectedPath = PROTECTED_PATHS.some(\n        (path) => pathname === path || pathname.startsWith(`${path}/`)\n    );\n\n    // Check if the path is an auth-only route\n    const isAuthPath = AUTH_PATHS.some(\n        (path) => pathname === path || pathname.startsWith(`${path}/`)\n    );\n\n    // Redirect unauthenticated users away from protected pages\n    if (isProtectedPath && !hasRefreshToken) {\n        const loginUrl = new URL('/login', request.url);\n        return NextResponse.redirect(loginUrl);\n    }\n\n    // Redirect authenticated users away from login page\n    if (isAuthPath && hasRefreshToken) {\n        const dashboardUrl = new URL('/dashboard', request.url);\n        return NextResponse.redirect(dashboardUrl);\n    }\n\n    return NextResponse.next();\n}\n\nexport const config = {\n    matcher: [\n        /*\n         * Match all request paths except:\n         * - _next/static (static files)\n         * - _next/image (image optimization)\n         * - favicon.ico, images, and other static assets\n         */\n        '/((?!_next/static|_next/image|favicon.ico|images/).*)',\n    ],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAGA;;CAEC,GACD,MAAM,kBAAkB;IACpB;IACA;IACA;IACA;IACA;IACA;CACH;AAED;;CAEC,GACD,MAAM,aAAa;IAAC;CAAS;AAUtB,SAAS,WAAW,OAAoB;IAC3C,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IACpC,MAAM,kBAAkB,QAAQ,OAAO,CAAC,GAAG,CAAC;IAE5C,8CAA8C;IAC9C,MAAM,kBAAkB,gBAAgB,IAAI,CACxC,CAAC,OAAS,aAAa,QAAQ,SAAS,UAAU,CAAC,GAAG,KAAK,CAAC,CAAC;IAGjE,0CAA0C;IAC1C,MAAM,aAAa,WAAW,IAAI,CAC9B,CAAC,OAAS,aAAa,QAAQ,SAAS,UAAU,CAAC,GAAG,KAAK,CAAC,CAAC;IAGjE,2DAA2D;IAC3D,IAAI,mBAAmB,CAAC,iBAAiB;QACrC,MAAM,WAAW,IAAI,IAAI,UAAU,QAAQ,GAAG;QAC9C,OAAO,gMAAY,CAAC,QAAQ,CAAC;IACjC;IAEA,oDAAoD;IACpD,IAAI,cAAc,iBAAiB;QAC/B,MAAM,eAAe,IAAI,IAAI,cAAc,QAAQ,GAAG;QACtD,OAAO,gMAAY,CAAC,QAAQ,CAAC;IACjC;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC5B;AAEO,MAAM,SAAS;IAClB,SAAS;QACL;;;;;SAKC,GACD;KACH;AACL"}}]
}